<!DOCTYPE html>
<html lang="en">
    <%- include("partials/head", {titulo: "Registrate"}) %> 
    <link rel="stylesheet" href="/css/register.css">

<body>
    <%- include("partials/header") %>
    <main>
        <form action="/users/register" method="POST" class="tabla" enctype="multipart/form-data">
            <div class="control-formulario">
               <input class="input-formularios" type="text" name="firstName"  placeholder="Nombre" value="<%= locals.oldData ? oldData.nombre : null %>">
               <% if(locals.errors && errors.firstName){ %>
                <div class="error">
                    <%= errors.firstName.msg %> 
                </div>
            <% } %> 
            </div>
            <div class="control-formulario">
                <input class="input-formularios" type="text" name="lastName" placeholder="Apellido" value="<%= locals.oldData ? oldData.apellido : null %>">
                <% if(locals.errors && errors.lastName){ %>
                    <div class="error">
                        <%= errors.lastName.msg %> 
                    </div>
                <% } %> 
             </div> 
            <div class="control-formulario">
                </label>
                <input class="input-formularios" type="text" name="userName" placeholder="Usuario" value="<%= locals.oldData ? oldData.usuario : null %>">
                <% if(locals.errors && errors.userName){ %>
                    <div class="error">
                        <%= errors.userName.msg %> 
                    </div>
                <% } %> 
            </div>
            <div class="control-formulario">
            </label>
            <input class="input-formularios" type="text" name="email"  placeholder="e-mail" value="<%= locals.oldData ? oldData.email : null %>">
            <% if(locals.errors && errors.email){ %>
                <div class="error">
                    <%= errors.email.msg %> 
                </div>
            <% } %>
            <% if(locals.msg){  %> 
            <div class="error">
                <%= locals.msg %> 
            </div>
            <% } %> 
        </div>  
            <div class="control-formulario">
                <label class="fechadenacimiento">Fecha de Nacimiento</label>
                <input class="input-formularios-date" type="date" name="birthdate" required placeholder="mm/dd/yy" value="<%= locals.oldData ? oldData.fechaNacimiento : null %>"> 
            </div>
            <div class="control-formulario">
                <select name="province">
                    <option selected disabled>Provincia</option>
                    <% p.forEach(p => { %>
                        <option value="<%= p.nombre %>" >
                           <%= p.nombre %> 
                        </option>
                       <% }) %>
                    
                </select>
            </div>  
            <div class="control-formulario">
                <input class="input-formularios" type="text" name="city"  required placeholder ="Localidad" value="<%= locals.oldData ? oldData.localidad : null %>"> 
            </div> 
            <div class="control-formulario">
                <input class="input-formularios" type="text" name="address" required placeholder ="Domicilio" value="<%= locals.oldData ? oldData.domicilio : null %>"> 
            </div> 
            <div class="control-formulario">
              <input class="input-formularios" type="password" name="password" required placeholder="ContraseÃ±a"> 
              <% if(locals.errors && errors.password){ %>
                <div class="error">
                    <%= errors.password.msg %> 
                </div>
            <% } %>  
            </div>
            <div>
                <label>Imagen de perfil:</label>
                <input type="file" name="imagenUsuario">
                <% if(locals.errors && errors.imagenUsuario){ %>
                    <div class="error">
                        <%= errors.imagenUsuario.msg %> 
                    </div>
                <% } %> 
            </div>
            <div class="control-formulario">              
              <button class="envia" type="submit">Enviar</button><a href="/index"></a>
              <button  class="borra" type="reset">Borrar</button>
            </div>
           </form>
    </main>
    <%- include("partials/footer") %> 
</body>

</html>